# ğŸ¢ System Kolejek GÃ³rskich
Aplikacja API zarzÄ…dzajÄ…ca kolejkami gÃ³rskimi, ich wagonami, personelem i przepustowoÅ›ciÄ… w czasie rzeczywistym. 
System informuje o problemach z obsÅ‚ugÄ… klientÃ³w i generuje statystyki. 
Monitor CLI dziaÅ‚a asynchronicznie dziÄ™ki ReactPHP.

## ğŸ”§ Technologie
- PHP 8.2+
- CodeIgniter 4
- Redis
- ReactPHP (monitoring CLI)
- Docker + Docker Compose
- Nginx + PHP-FPM

## ğŸ“ Struktura
- `app/Application/` â€“ logika biznesowa
- `app/System/` â€“ warstwa frameworka (np. konfiguracje, filtry)
- `setup.bash` â€“ skrypt do uzupeÅ‚nienia danych testowych (`curl`)
- `writable/` â€“ katalog na logi, cache i sesje (ignoringowany przez git)

## â–¶ï¸ Uruchomienie aplikacji

```bash
git clone https://github.com/adam-pawelczykk/system-kolejek.git
cd system-kolejek

# Uruchomienie kontenerÃ³w
docker compose up --build -d

# UzupeÅ‚nienie przykÅ‚adowych danych
bash setup.bash
```

### Aplikacja bÄ™dzie dostÄ™pna pod adresem:
http://localhost:8080

### Monitor CLI
```
docker compose exec app php app/UI/CLI/monitor.php
```

### Tryby Å›rodowiskowe
#### Patrz .env.dev / .env.prod
```
CI_ENVIRONMENT=development # lub production
REDIS_PREFIX=dev:          # lub prod:
```

### Testy
#### Testy obejmujÄ… reguÅ‚y domenowe
```
docker compose exec app php vendor/bin/phpunit
```

### Monitor
```
docker compose up -d
docker compose exec app php spark monitor
```

### Logi
Logi sÄ… zapisywane w writable/logs/{ENVIRONMENT}/
W trybie produkcyjnym logujÄ… siÄ™ tylko error i warning
W trybie deweloperskim logujÄ… siÄ™ wszystkie poziomy

### Wymagania
Docker + Docker Compose
Port 8080 wolny
bash do uruchomienia setup.bash - automatycznie uzupeÅ‚nia przykÅ‚adowe dane
